<MainScreenView>
    MDBottomNavigation:
        id: bottom_nav
        
        MDBottomNavigationItem:
            name: 'main'
            text: 'Главная'
            icon: 'home'
            md_bg_color: '#e6f6ff'
            
            MDScrollView:
                do_scroll_x: False
                do_scroll_y: True
                
                MDBoxLayout:
                    orientation: 'vertical'
                    adaptive_height: True
                    padding: '20dp', '10dp', '20dp', '10dp'
                    spacing: '10dp'              

                    MDTextField:
                        icon_left: 'magnify'
                        hint_text: 'Поиск'
                        mode: 'rectangle'
                        on_focus:root.to_search_screen()
                
                    MDBoxLayout:
                        adaptive_height: True
                        
                        MDCard:
                            size_hint_y: None
                            height: '120dp'
  
                    MDLabel:
                        text: 'Категории'
                        font_style: 'Button'
                        theme_text_color: 'Custom'
                        text_color: '#0072B5'

                    MDScrollView:
                        do_scroll_x: True
                        do_scroll_y: False
                        size_hint_y: None
                        height: dp(130)

                        MDBoxLayout:
                            id: category_list_container
                            adaptive_size: True
                            spacing: dp(5)
                    
                    MDBoxLayout:
                        adaptive_height: True
                    
                        MDLabel:
                            text: 'Последние добавления'
                            font_style: 'Button'
                            theme_text_color: 'Custom'
                            text_color: '#0072B5'
                        
                        MDSegmentedButton:
                            id: browse_type_button
                            size_hint: .8, .4
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            on_marked: root.set_browse_type(*args)
                            
                            MDSegmentedButtonItem:
                                id: gallery_button
                                icon: 'view-gallery-outline'

                            MDSegmentedButtonItem:
                                id: list_button
                                icon: 'view-list-outline'
                                

                            MDSegmentedButtonItem:
                                id: grid_button
                                icon: 'view-grid-outline'

                    MDRecycleView:
                        id: gallery_rv
                        viewclass: 'GalleryLabel'
                        size_hint_y: None
                        height: root.ids.gallery_rv_layout.height
                        do_scroll_x: False
                        do_scroll_y: False
                        opacity: 0

                        BoxRecycleLayout:
                            id: gallery_rv_layout
                            size_hint_y: None
                            height: root.ids.gallery_rv.opacity == 1 and self.minimum_height or 0
                            orientation: 'vertical'
                            default_size: None, dp(250)
                            default_size_hint: 1, None
                            spacing: '20dp'
                
                    MDRecycleView:
                        id: list_rv
                        viewclass: 'ListLabel'
                        size_hint_y: None
                        height: root.ids.list_rv_layout.height
                        do_scroll_x: False
                        do_scroll_y: False
                        opacity: 0

                        BoxRecycleLayout:
                            id: list_rv_layout
                            size_hint_y: None
                            height: root.ids.list_rv.opacity == 1 and self.minimum_height or 0
                            orientation: 'vertical'
                            default_size: None, dp(120)
                            default_size_hint: 1, None
                            spacing: '20dp'
                    
                    MDRecycleView:
                        id: grid_rv
                        viewclass: 'GridLabel'
                        size_hint_y: None
                        height: root.ids.grid_rv_layout.height
                        do_scroll_x: False
                        do_scroll_y: False
                        opacity: 0

                        GridRecycleLayout:
                            id: grid_rv_layout
                            size_hint_y: None
                            height: root.ids.grid_rv.opacity == 1 and self.minimum_height or 0
                            default_size: None, dp(120)
                            default_size_hint: 1, None
                            spacing: '5dp'
                            cols: 2

                    
 
        MDBottomNavigationItem:
            name: 'favorit'
            text: 'Избранное'
            icon: 'heart-outline'

            MDLabel:
                text: 'Избранное'
                halign: 'center'

        MDBottomNavigationItem:
            name: 'messages'
            text: 'Сообщения'
            icon: 'message-outline'

            MDLabel:
                text: 'Сообщения'
                halign: 'center'
    
        MDBottomNavigationItem:
            name: 'contacts'
            text: 'Контакты'
            icon: 'apps'

            MDLabel:
                text: 'Контакты'
                halign: 'center'
