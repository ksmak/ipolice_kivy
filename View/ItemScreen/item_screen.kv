<ItemScreenView>
    MDBoxLayout:
        orientation: 'vertical'
        md_bg_color: app.theme_cls.primary_light

        MDScrollView:
            do_scroll_x: False
            do_scroll_y: True
            
            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True

                MDRelativeLayout:
                    size_hint_y: None
                    height: '350dp'

                    MDCarousel:
                        id: carousel
                        on_slide_complete:
                            root.ids.counter.text = str(self.index + 1) + '/' + str(len(self.slides))
                    
                    MDIconButton:
                        id: back_button
                        pos_hint: {'top': 1, 'x': 0}
                        icon: 'arrow-left'
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.primary_color
                        on_press:  root.manager_screens.current = root.model.target_screen

                    MDLabel:
                        id: counter
                        pos_hint: {'top': .1, 'x': .9}
                        theme_text_color: "Custom"
                        text_color: '#ffffff'
                        font_style: 'Caption'
                        bold: True
                        adaptive_size: True
                        shorten: True
                        md_bg_color: .7, .7, .7, 1
                        padding: dp(1)
                    
                    MDIconButton:
                        id: favorite_button
                        pos_hint: {'top': 1, 'x': .85}
                        theme_icon_color: 'Custom'
                        icon_color: app.theme_cls.primary_color
                        icon_size: '24dp'
                        icon: 'star' if root.is_favorite else 'star-outline'

                MDBoxLayout:
                    orientation: 'vertical'
                    adaptive_height: True
                    padding: '20dp'
                    spacing: '15dp'

                    MDLabel:
                        id: title
                        pos_hint: {"center_x": .5, "center_y": .5}
                        font_style: 'H6'
                        theme_text_color: 'Custom'
                        text_color: app.theme_cls.primary_color
                        adaptive_height: True

                    MDBoxLayout:
                        orientation: 'vertical'
                        adaptive_height: True
                        spacing: '5dp'
                    
                        MDLabel:
                            text: 'Описание:'
                            pos_hint: {"center_x": .5, "center_y": .5}
                            font_style: 'Button'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_color
                            bold: True,
                            adaptive_height: True
                        
                        MDLabel:
                            id: text
                            pos_hint: {"center_x": .52, "center_y": .5}
                            font_style: 'Caption'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_color
                            adaptive_height: True
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        adaptive_height: True
                        spacing: '5dp'

                        MDLabel:
                            text: 'Детали:'
                            pos_hint: {"center_x": .5, "center_y": .5}
                            font_style: 'Button'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_color
                            bold: True
                            adaptive_height: True
                        
                        MDBoxLayout:
                            id: details_container
                            adaptive_size: True
                            spacing: '10dp'
                            padding: '5dp', 0, 0, 0

                    MDBoxLayout:
                        orientation: 'vertical'
                        adaptive_height: True                    
                    
                        MDLabel:
                            id: date_of_creation
                            pos_hint: {"center_x": .5, "center_y": .5}
                            font_style: 'Caption'
                            font_size: '10sp'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_color
                            adaptive_height: True
                        
                        MDLabel:
                            id: date_of_change
                            pos_hint: {"center_x": .5, "center_y": .5}
                            font_style: 'Caption'
                            font_size: '10sp'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_color
                            adaptive_height: True
    

        MDBoxLayout:
            size_hint_y: .1
            md_bg_color: app.theme_cls.primary_color
            padding: '20dp', 0, '20dp', 0
            spacing: '10dp'
            
            MDRectangleFlatIconButton:
                icon: "phone"
                icon_color: 'white'
                size_hint: .6, .6
                pos_hint: {'center_x': .5, 'center_y': .5}
                text: "Позвонить"
                theme_text_color: "Custom"
                text_color: "white"
                line_color: "white"
                md_bg_color: app.theme_cls.primary_color
                font_style: 'Button'
                on_release: root.call_phone()

            MDRectangleFlatIconButton:
                icon: "message-processing-outline"
                size_hint: .6, .6
                pos_hint: {'center_x': .5, 'center_y': .5}
                text: "Написать"
                theme_text_color: "Custom"
                text_color: app.theme_cls.primary_color
                line_color: app.theme_cls.primary_color
                md_bg_color: "white"
                font_style: 'Button'
                on_release: root.create_message()
    

                    